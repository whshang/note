# 如何建立组织级的 AI 知识库：/CLAUDE.md 实践

## 背景

在我们团队推行 AI 工具的前 3 个月，遇到了一个大问题：
**每个人都训练了自己的 AI，但知识无法共享。**

有人的 AI 知道我们的代码规范，有人的不知道。
有人的 AI 了解业务上下文，有人的不了解。

直到我们建立了 `/CLAUDE.md`，问题才得到解决。

## 我的初始尝试：失败的文档

### 第一版 /CLAUDE.md

```
# /CLAUDE.md

## 技术栈
- React
- Node.js
- PostgreSQL

## 代码规范
- ESLint
- Prettier

## 业务介绍
- 电商平台
- 用户管理、商品管理、订单管理
```

### 问题

1. **太简单**
   - AI 无法从中获得足够的上下文
   - 遇到具体问题时仍然需要额外解释

2. **不实用**
   - 更像是"介绍文档"而不是"使用手册"
   - AI 不知道该怎么用这些信息

3. **不更新**
   - 一周后就过时了
   - 没有人维护

## 我的第二次尝试：过度复杂的文档

### 第二版 /CLAUDE.md

```
# /CLAUDE.md - 完整版

## 1. 项目概述
### 1.1 项目背景
### 1.2 项目目标
### 1.3 项目范围

## 2. 技术架构
### 2.1 前端架构
### 2.2 后端架构
### 2.3 数据库设计

## 3. 代码规范
### 3.1 命名规范
### 3.2 注释规范
### 3.3 提交规范

... (总共 5000+ 字)
```

### 问题

1. **太长**
   - AI 处理时容易遗漏关键信息
   - token 消耗巨大

2. **结构僵化**
   - 每次修改都很麻烦
   - 不够灵活

3. **实用性差**
   - AI 不知道该关注哪部分
   - 信息密度低

## 我现在的做法：实用导向的 /CLAUDE.md

### 框架模板

```
# /CLAUDE.md - [项目名称] AI 知识库

## 【快速了解】
- 一句话描述项目
- 核心功能列表
- 目标用户群体

## 【技术栈】
- 前端：[框架/语言/工具]
- 后端：[框架/语言/工具] 
- 数据库：[类型/版本]
- 部署：[环境/流程]

## 【代码规范】
- 命名约定：[具体规则]
- 代码风格：[关键点]
- 提交规范：[格式要求]

## 【业务上下文】
- 核心业务逻辑
- 关键业务规则
- 常见业务场景

## 【常见问题】
- [问题1] → [标准答案]
- [问题2] → [标准答案]

## 【注意事项】
- [重要约束1]
- [重要约束2]
```

### 实际应用

这是我们现在的 `/CLAUDE.md`：

```
# /CLAUDE.md - 电商后台系统 AI 知识库

## 【快速了解】
- SaaS 电商平台后台管理系统
- 核心功能：用户管理、商品管理、订单管理、数据统计
- 目标用户：电商运营人员

## 【技术栈】
- 前端：React 18 + TypeScript + Ant Design
- 后端：Node.js + Express + TypeScript
- 数据库：PostgreSQL 14
- 部署：Docker + AWS

## 【代码规范】
- 命名：组件 PascalCase，Hook use + 动词，变量 camelCase
- 代码：ESLint + Prettier，TypeScript 严格模式
- 提交：feat/fix/docs/style 等前缀 + 简洁描述

## 【业务上下文】
- 用户角色：普通用户(ROLE_USER)、VIP(ROLE_VIP)、管理员(ROLE_ADMIN)
- 订单状态：待付款(PENDING)、已付款(PAID)、已发货(SHIPPED)、已完成(COMPLETED)
- 商品库存：实时同步，下单时锁定

## 【常见问题】
- 如何获取当前用户？ → req.user (JWT 解析)
- 如何处理权限？ → @RequireRole 装饰器
- 如何添加新功能？ → 遵循 MVC 模式，前后端分离

## 【注意事项】
- 所有 API 必须鉴权
- 数据库操作必须使用事务
- 敏感信息禁止打印日志
```

### 效果

现在 AI 能：
- 理解我们的技术栈
- 遵循我们的代码规范
- 了解业务上下文
- 避免常见错误

## 关键技巧

### 1. 信息分层

```
Level 1 (必须): 技术栈 + 业务核心
Level 2 (重要): 代码规范 + 常见问题
Level 3 (可选): 部署细节 + 注意事项
```

### 2. 问题导向

不是罗列信息，而是回答 AI 可能遇到的问题：

```
❌ 错误方式：
数据库：PostgreSQL

✅ 正确方式：
数据库：PostgreSQL 14
连接池：最大连接数 20
常用操作：[CURD 模板代码]
注意事项：事务使用方式
```

### 3. 实例化

用具体例子代替抽象描述：

```
❌ 抽象：
权限控制：使用装饰器

✅ 具体：
权限控制：
// 管理员权限
@RequireRole(['ADMIN'])
getUsers(req, res) { ... }

// 用户或 VIP 权限
@RequireRole(['USER', 'VIP'])  
getViewProfile(req, res) { ... }
```

### 4. 持续更新

建立更新机制：

```
更新频率：每周检查一次
更新责任人：Tech Lead
更新触发条件：
- 技术栈变更
- 业务逻辑调整
- 常见问题新增
```

## 团队协作实践

### 1. 共同维护

```
技术规范 → Tech Lead
业务逻辑 → Product Manager  
常见问题 → All Team Members
```

### 2. 新人入职

```
第 1 天：阅读 /CLAUDE.md
第 2 天：在 Claude 中测试知识库
第 3 天：提交知识库改进建议
```

### 3. 定期回顾

```
每周五：团队检查知识库有效性
每月末：评估知识库覆盖率
每季度：重构知识库结构
```

## 实际效果

### 量化数据

- 新人上手时间：从 2 周缩短到 3 天
- 代码规范一致性：从 70% 提升到 95%
- 重复问题减少：从每天 10 个减少到 2 个
- AI 输出质量：从 60% 提升到 85%

### 质化反馈

- "AI 终于知道我们用 TypeScript 了"
- "不用再解释数据库结构了"
- "新人问的问题越来越专业"

## 我的 /CLAUDE.md 检查清单

创建或更新时，我会检查：

1. **信息是否完整？**（技术栈、业务、规范）
2. **是否实用？**（AI 能直接用）
3. **是否简洁？**（避免冗余信息）
4. **是否更新？**（反映最新状态）
5. **是否分层？**（重要信息突出）

## 进阶技巧

### 1. 版本管理

```
/CLAUDE.md - 当前版本
/CLAUDE.v1.md - 历史版本
/CLAUDE.temp.md - 临时更新
```

### 2. 模块化

对于大型项目：

```
/CLAUDE.frontend.md - 前端知识库
/CLAUDE.backend.md - 后端知识库
/CLAUDE.mobile.md - 移动端知识库
/CLAUDE.main.md - 综合知识库
```

### 3. 自动化更新

```
代码提交 → 触发脚本 → 更新知识库 → 通知团队
```

## 关键洞察

`/CLAUDE.md` 的本质是**团队知识的 AI 友好化**：
- 不是文档，而是上下文
- 不是说明，而是指导
- 不是静态，而是动态

## 给团队的建议

### 开始时

1. **从简单开始**
   - 先写核心信息
   - 逐步完善细节

2. **团队共建**
   - 每个人贡献一部分
   - 集体评审修改

3. **立即使用**
   - 不要等到完美
   - 在使用中改进

### 成熟后

1. **定期维护**
   - 指定责任人
   - 建立更新流程

2. **度量效果**
   - 跟踪 AI 输出质量
   - 收集团队反馈

3. **持续优化**
   - 根据使用情况调整
   - 增加实用内容

## 结论

好的 `/CLAUDE.md` 不是文档，而是**团队与 AI 的协作协议**。

关键在于：
- **实用 > 完整**
- **简洁 > 详细**  
- **动态 > 静态**
- **团队共建 > 个人维护**

这个知识库让我们团队的 AI 使用效率提升了 3 倍。
希望对你也有帮助。
